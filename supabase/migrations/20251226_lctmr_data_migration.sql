-- ============================================
-- LCTMR æ•°æ®è¿ç§»è„šæœ¬
-- ä»é˜¿é‡Œäº‘ PostgreSQL è¿ç§»åˆ° Supabase
-- ============================================

-- æ³¨æ„ï¼šæ­¤è„šæœ¬éœ€è¦æ‰‹åŠ¨ä»é˜¿é‡Œäº‘å¯¼å‡ºæ•°æ®åæ‰§è¡Œ

-- ============================================
-- 1. æ›´æ–°é˜µè¥è¡¨ï¼ˆä½¿ç”¨éƒ¨é—¨æ•°æ®ï¼‰
-- ============================================

-- æ¸…ç©ºé»˜è®¤é˜µè¥æ•°æ®
DELETE FROM lctmr_factions;

-- æ’å…¥ä»é˜¿é‡Œäº‘å¯¼å‡ºçš„éƒ¨é—¨/é˜µè¥æ•°æ®
INSERT INTO lctmr_factions (id, name, description, icon, color, is_active, created_at) VALUES
    (gen_random_uuid(), 'ITæŠ€æœ¯éƒ¨', 'è´Ÿè´£æŠ€æœ¯å¼€å‘å’Œç³»ç»Ÿç»´æŠ¤', 'ğŸ’»', '#FF5733', true, NOW()),
    (gen_random_uuid(), 'ä¿¡æ¯ç®¡ç†éƒ¨', 'è´Ÿè´£ä¿¡æ¯ç®¡ç†å’Œæ•°æ®åˆ†æ', 'ğŸ“Š', '#33FF57', true, NOW()),
    (gen_random_uuid(), 'é¡¹ç›®ç»¼åˆç®¡ç†éƒ¨', 'è´Ÿè´£é¡¹ç›®ç®¡ç†å’Œåè°ƒ', 'ğŸ“‹', '#3357FF', true, NOW()),
    (gen_random_uuid(), 'æ•°æ®ç®¡ç†éƒ¨', 'è´Ÿè´£æ•°æ®ç®¡ç†å’Œæ²»ç†', 'ğŸ—„ï¸', '#FF33F5', true, NOW()),
    (gen_random_uuid(), 'æˆ˜ç•¥ç®¡ç†éƒ¨', 'è´Ÿè´£æˆ˜ç•¥è§„åˆ’å’Œå†³ç­–', 'ğŸ¯', '#F5FF33', true, NOW()),
    (gen_random_uuid(), 'ç‰©æµITéƒ¨', 'è´Ÿè´£ç‰©æµä¿¡æ¯åŒ–å»ºè®¾', 'ğŸšš', '#33FFF5', true, NOW()),
    (gen_random_uuid(), 'é¡¹ç›®AOC', 'è´Ÿè´£é¡¹ç›®è¿è¥ä¸­å¿ƒ', 'ğŸ¢', '#FF8C33', true, NOW()),
    (gen_random_uuid(), '3333éƒ¨é—¨', 'ç‰¹æ®Šé¡¹ç›®éƒ¨é—¨', 'â­', '#8C33FF', true, NOW());

-- ============================================
-- 2. è¿ç§»åˆ†ç±»è¡¨
-- ============================================

-- æ¸…ç©ºç°æœ‰æ•°æ®
DELETE FROM lctmr_sections;
DELETE FROM lctmr_chapters;
DELETE FROM lctmr_categories;

-- æ’å…¥åˆ†ç±»æ•°æ®ï¼ˆä»é˜¿é‡Œäº‘å¯¼å‡ºï¼‰
-- å ä½ç¬¦ - éœ€è¦ä»é˜¿é‡Œäº‘å¯¼å‡ºå®é™…æ•°æ®

-- ============================================
-- 3. ç”¨æˆ·è¿ç§»è¯´æ˜
-- ============================================

-- ç”±äº LCTMR åŸæ¥ä½¿ç”¨ç‹¬ç«‹çš„ auth.users è¡¨ï¼ˆé˜¿é‡Œäº‘æœ¬åœ°ï¼‰ï¼Œ
-- è€Œç°åœ¨ç»Ÿä¸€ä½¿ç”¨ Supabase auth.usersï¼Œç”¨æˆ·éœ€è¦ï¼š
-- 
-- æ–¹æ¡ˆ A: ç”¨æˆ·é‡æ–°åœ¨é—¨æˆ·æ³¨å†Œï¼ˆæ¨èï¼‰
--   - ç»Ÿä¸€ä»é—¨æˆ·ç™»å½•
--   - é¦–æ¬¡è®¿é—® LCTMR è‡ªåŠ¨åˆ›å»º lctmr_profiles
--
-- æ–¹æ¡ˆ B: æ‰‹åŠ¨è¿ç§»ç”¨æˆ·
--   - éœ€è¦åŒæ­¥å¯†ç å“ˆå¸Œï¼ˆå¯èƒ½ä¸å…¼å®¹ï¼‰
--   - é£é™©è¾ƒé«˜

COMMENT ON TABLE lctmr_profiles IS 'ç”¨æˆ·æ¡£æ¡ˆè¡¨ - ç”¨æˆ·é€šè¿‡é—¨æˆ· SSO ç™»å½•åè‡ªåŠ¨åˆ›å»º';

-- ============================================
-- 4. éªŒè¯è¿ç§»ç»“æœ
-- ============================================

-- SELECT 'lctmr_factions' as table_name, COUNT(*) as count FROM lctmr_factions
-- UNION ALL SELECT 'lctmr_categories', COUNT(*) FROM lctmr_categories
-- UNION ALL SELECT 'lctmr_chapters', COUNT(*) FROM lctmr_chapters
-- UNION ALL SELECT 'lctmr_sections', COUNT(*) FROM lctmr_sections;
